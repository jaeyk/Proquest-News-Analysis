<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tidying Ethnic NewsWatch Search Results • tidyethnicnews</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tidying Ethnic NewsWatch Search Results">
<meta property="og:description" content="The Ethnic NewsWatch database, provided by ProQuest, has compiled more than 2.5 million articles published in US ethnic newspapers and magazines. This data source helps researchers investigate the political voice of minority groups in the US with rich and extensive text data. These functions turn unstructured Ethnic NewsWatch search results into tidyverse-ready dataframes.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidyethnicnews</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jaeyk/tidyethnicnews/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tidyethnicnews" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tidyethnicnews" class="anchor"></a>tidyethnicnews</h1></div>
<p>An R Package for Turning Ethnic NewsWatch Search Results into Tidyverse-ready Dataframes</p>
<p>Author: <a href="https://jaeyk.github.io/">Jae Yeon Kim</a></p>
<p>File an <a href="https://github.com/jaeyk/tidyethnicnews/issues">issue</a> if you have problems, questions or suggestions.</p>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The <a href="https://about.proquest.com/products-services/ethnic_newswatch.html">Ethnic NewsWatch database</a>, provided by <a href="https://about.proquest.com/">ProQuest</a>, has compiled more than 2.5 million articles published in US ethnic newspapers and magazines. The database covers the following groups:</p>
<ul>
<li>African American/Caribbean/African</li>
<li>Arab/Middle Eastern</li>
<li>Asian/Pacific Islander</li>
<li>European/Eastern European</li>
<li>Latinx</li>
<li>Jewish</li>
<li>Native Americans</li>
</ul>
<p>This data source helps researchers investigate the political voice of minority groups in the US with rich and extensive text data. <code>tidyethnicnews</code> provides functions to turn Ethnic NewsWatch search results into tidyverse-ready dataframes.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">

<span class="co">## Install the current development version from GitHub</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"jaeyk/tidyethnicnews"</span>,
                         dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
</div>
<div id="responsible-use" class="section level2">
<h2 class="hasAnchor">
<a href="#responsible-use" class="anchor"></a>Responsible use</h2>
<p><code>tidyethnicnews</code> should be used in strict accordance with Ethnic NewsWatch’s <a href="https://about.proquest.com/about/terms-and-conditions.html">Terms of Use</a>. ProQuest does not allow web scraping. Instead, I recommend manually downloading search results from the database. Below, I provide a step-by-step guide. This method still works as of June 13, 2020. However, please note that ProQuest’s download policy could change at any time.</p>
<div id="how-to-download-html-search-results-from-ethnic-newswatch" class="section level3">
<h3 class="hasAnchor">
<a href="#how-to-download-html-search-results-from-ethnic-newswatch" class="anchor"></a>How to download HTML search results from Ethnic NewsWatch</h3>
<ol>
<li><p>Visit the website of a library that you are a member of (assuming that the library has access to the Ethnic NewsWatch database).</p></li>
<li><p>Access the database through the library website.</p></li>
<li><p>Search the database using a specified query. In general, I recommend limiting the search results to <code>full text</code>, excluding <code>duplicates</code> (one of the <code>page options</code>), and increasing items per page to <code>100</code> for high data quality and efficient data processing.</p></li>
<li><p>Select all the items that have appeared on a specific webpage. (If your search yields 1,000 items, you should have 10 pages.)</p></li>
<li><p>Click the <code>...</code> action button and save the search result using the <code>PRINT</code> option. There are multiple file formats for saving the search result, but <code>HTML</code> is the most flexible for extracting various attributes. The printed search result should look like the sample screenshot in Figure 1.</p></li>
</ol>
<p><img src="https://github.com/jaeyk/ITS-Text-Classification/raw/master/misc/screenshot.png" width="800"></p>
<p>Figure 1. Sample screenshot.</p>
<ol>
<li><p>Save the printed search result (an HTML file) in a directory.</p></li>
<li><p>Manually repeat steps 4–6 of the process. Caution should be taken, as automating this process will violate ProQuest’s Terms of Use.</p></li>
</ol>
</div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Now, you have a list of unstructured HTML files. Collecting the data has been tedious. By contrast, turning these files into a tidyverse-ready dataframe is incredibly easy and lightning fast with the help of <code>tidyethnicnews</code>. The parsed text data has four columns: <code>text</code>, <code>author</code>, (publication) <code>date</code>, and <code>source</code> (publisher). Its rows are newspaper articles. You can enrich the text data by adding other covariates, searching key words, exploring topics, and classifying main issues.</p>
<div id="1-html_to_dateframe-turn-an-html-file-into-a-dataframe" class="section level3">
<h3 class="hasAnchor">
<a href="#1-html_to_dateframe-turn-an-html-file-into-a-dataframe" class="anchor"></a>1. <code>html_to_dateframe()</code>: Turn an HTML file into a dataframe</h3>
<p>As a test, select one of the HTML files and inspect whether the result is desirable.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">

<span class="co"># Load library</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">tidyethnicnews</span><span class="op">)</span>

<span class="co"># You need to choose an HTML search result</span>
<span class="va">filepath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.choose.html">file.choose</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Assign the parsed result to the `df` object</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/html_to_dataframe.html">html_to_dataframe</a></span><span class="op">(</span><span class="va">filepath</span><span class="op">)</span></pre></div>
<p>The <code>df</code> object should have four columns: <code>text</code>, <code>author</code>, <code>source</code>, <code>date</code>. According to the performance test done by the <code>microbenchmark</code> package, the <code><a href="reference/html_to_dataframe.html">html_to_dataframe()</a></code> function takes average <strong>0.0005</strong> seconds to turn <strong>100</strong> newspaper articles into a tidy dataframe.</p>
<p>This function helps you clean and wrangle your text data without needing to know anything about parsing HTML and manipulating string patterns (regular expressions).</p>
<p><strong>Notes on the Error Messages</strong></p>
<p>If an article is missing an <code>author</code> field, a value in the <code>source</code> field is moved to the <code>author</code> field and <code>NA</code> is recorded in the <code>source</code> field during the wrangling process. When this issue occurs, you will receive an error message saying:</p>
<blockquote>
<p>“NAs were found in source column. The problem will be fixed automatically.”`</p>
</blockquote>
<p>As stated in the message, the problem will be fixed automatically and there’s nothing you need to worry about. If you are not assured, then please take a look at the source code.</p>
</div>
<div id="2-html_to_dataframe_all-turn-all-html-files-saved-in-a-directory-into-a-dataframe" class="section level3">
<h3 class="hasAnchor">
<a href="#2-html_to_dataframe_all-turn-all-html-files-saved-in-a-directory-into-a-dataframe" class="anchor"></a>2. <code>html_to_dataframe_all()</code>: Turn all HTML files, saved in a directory, into a dataframe</h3>
<p>The next step is scale-up. The <code><a href="reference/html_to_dataframe_all.html">html_to_dataframe_all()</a></code> function allows you to turn all the HTML files saved in a particular directory into a d dataframe using a single command.</p>
<p>Again, the <code>df_all</code> object should have four columns: <code>text</code>, <code>author</code>, <code>source</code>, <code>date</code>. I tested the running time performance using the <code>tictoc</code> package. If you use parallel processing, the <code><a href="reference/html_to_dataframe_all.html">html_to_dataframe_all()</a></code> function takes <strong>12.34</strong> seconds to turn <strong>5,684</strong> articles into a dataframe. (On average, <strong>0.002</strong> seconds per article.)</p>
<div class="sourceCode" id="cb3"><pre class="downlit">

<span class="co"># Load library</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">tidyethnicnews</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DavisVaughan/furrr">furrr</a></span><span class="op">)</span> <span class="co"># for parallel processing </span>

<span class="co"># You need to designate a directory path.</span>
<span class="va">dirpath</span> <span class="op">&lt;-</span> <span class="fu">tcltk</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tcltk/tk_choose.dir.html">tk_choose.dir</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Parallel processing </span>
<span class="va">n_cores</span> <span class="op">&lt;-</span> <span class="fu">availableCores</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>

<span class="fu">plan</span><span class="op">(</span><span class="va">multiprocess</span>, <span class="co"># multicore, if supported, otherwise multisession</span>
     workers <span class="op">=</span> <span class="va">n_cores</span><span class="op">)</span> <span class="co"># the maximum number of workers</span>

<span class="co"># Assign the parsed result to the `df_all` object</span>
<span class="va">df_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/html_to_dataframe_all.html">html_to_dataframe_all</a></span><span class="op">(</span><span class="va">dirpath</span><span class="op">)</span></pre></div>
</div>
</div>
<div id="how-to-cite" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-cite" class="anchor"></a>How to cite</h2>
<p>If you would like to cite, please do something like the following:</p>
<pre><code>Jae Yeon Kim. (2020). tidyethnicnewws. R package version 0.2.0. Retrieved from https://github.com/jaeyk/tidyethnicnews</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jaeyk/tidyethnicnews/">https://​github.com/​jaeyk/​tidyethnicnews/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jaeyk/tidyethnicnews">https://​github.com/​jaeyk/​tidyethnicnews</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jae Yeon Kim <br><small class="roles"> Contributor, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jae Yeon Kim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
